---
title: NSIS——安装包基础
date: 2018-08-11 09:33:26
tags: [windows, nsis]
---

PS:以下内容只针对windows操作系统

----

## 什么是安装包

举个简单的例子。比如我们要要玩某款游戏，就会去下载这个游戏的安装包。A
在安装包中，会把游戏安装在我们电脑中的某个地方。并会给我们设置快捷方式。
当我们运行快捷方式的时候，就可以运行我们的程序。

当然，我们自己也可以写程序或者游戏,当我们的程序完成之后。需要发布给我们的用户。
这时候，就需要安装包来帮我们封装一下自己的程序。

简单的总结一下。安装包是对我们的软件进行包装，以便进行发布。

### 安装包具体能做什么

先来看一看，安装包都可以执行哪些操作

* 文件打包,压缩和释放，我们发布的程序很可能很多文件。打包和压缩更有利于我们线上发布。
* 创建快捷方式和开始菜单，方便用户的使用。
* 读写注册表，设置开机自启。
* 设置防火墙。
* 执行命令，安装其他程序。
* 展示用户协议。

首先值得一提的是，安装包本身也是可执行程序(.exe)。
所以，其实所有程序能做的事情，安装包都能做。

因为我们程序发布需要执行很多相关的操作，比如上面的很多操作。
当我们把这些操作进行通用的封装后，其实就生成了安装包。

### 安装包的一些说明

* 静默安装
通常来讲，我们的打开安装包后，会有界面弹出，一步一步指引用户进行安装。
但是，有时候我们不想让用户去点那么多。或者不想让用户知道我在安装程序。
那么，我们可以在后台悄悄的安装。不显示前端界面。
有很多的全家桶或者恶意软件都是这么做的。这种安装方式就叫做静默安装。

* 安装选项指定
有时候我们可能用其他的程序是调用和执行我们的安装包。有很多选项我们可以指定。
比如，安装的目录，是否静默安装。或者给安装包传入一些参数。
具体的方法是在命令行(cmd)中执行安装包并在后面传入参数。
需要注意的是，不同的安装包的参数有可能是不同的。因为他们可能是由不同的工具进行的打包。

我们可以使用`安装包名.exe /?` 这个方法来查看大部分安装包的选项。
比如，我们想查看vs2017运行库安装包的选项：
执行：`vcredist_x86.exe /?` 得到如下结果：

![](http://demo-1252736716.picsh.myqcloud.com/WechatIMG118.png)

其中`/quiet`就是静默安装的选项。

但是，很重要的一点。并不是所有安装包都支持这个命令，比如NSIS打包的工具就不支持。

## 什么是NSIS

引用 wiki 的描述.
> NSIS (Nullsoft Scriptable Install System) is a professional open source system to create Windows installers. 
> It is designed to be as small and flexible as possible and is therefore very suitable for internet distribution.

前面准备说了那么多，nsis就是帮我们做安装包的。

## 为什么选择nsis

为什么选择nsis:
* 开源
* 丰富的插件
* 很多大厂都在使用例如搜狗、酷狗等

nsis可以从官网进行下载安装。
其主体是一个makensis的程序。通过识别我们的.nsi文件。来生成具体的安装包。


## nsis基本操作

未完待续。。。。(。﹏。*)

